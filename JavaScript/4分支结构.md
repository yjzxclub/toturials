本文按照 Mozilla 贡献者基于 CC-BY-SA 2.5 协议发布的以下文章改编:

- <https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Control_flow_and_error_handling>

本文基于 CC-BY-SA 4.0 协议发布。

# 分支结构

基础的数据结构，我们了解不少了。现在到了去用它们做点什么的时候了。

加速！这里我们要开始讲一个基础结构——分支结构。

## 布尔值

在正式开始分支结构之前，我们要讲下**布尔值(Boolean)**，这是进行条件判断的基础，分支和循环结构都要用到。

布尔值也是一种类型，和我们之前讲过的数字和字符串一样。不同的是它只有两个值: `true` 和 `false`。分别对应 "真" 和 "假"。

``` js
> true;
true
> false;
false
> 
```

一般情况下我们也不会这样用布尔值，而是采用一些比较运算和逻辑运算来得到，就像下面这样。

``` js  
> 1 === 1; //1 和 1 相等，正确，是 true
true
> 1 === 0; //1 和 0 不相等
false
> true && true; // And 运算符
true
> true && false; // 必须两个都是 true 才是 true
false
> 
```

## 比较运算

比较运算符是一个**二元运算符**，意思是左右两边分别需要一个运算数，就像之前我们讲过的四则运算一样。不过比较运算的结果不是普通的数字，而是一个布尔值，即 `true` 和 `false` 。

``` js
> 1 + 2; // 四则运算，结果是数字
3
> 1 < 2; // 比较运算的结果是布尔值
true
> 1 > 2; // 1 小于 2 是假命题，所以 false
false
> 
```

通过这里，我们可以很明显的看出，比较运算有这两个特点：

- 如果表达式成立，那么值为 true
- 如果表达式不成立，那么值为 false

和数学类似，我们有大于，小于，等于这些比较运算符。不同的是，我们的大于等于和小于等于是 `>=` 和 `<=`，因为键盘打不出来数学里那个。而等于一般使用 `===`，这样不会和赋值 `=` 混淆。常用的比较运算符有这些：

<table class="standard-table">
 <caption>比较运算符</caption>
 <thead>
  <tr>
   <th scope="col">运算符</th>
   <th scope="col">描述</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Equality">等于 Equal</a> (<code>==</code>)</td>
   <td>
    <p>如果两边操作数相等时返回true。</p>
   </td>
  </tr>
  <tr>
   <td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Inequality">不等于 Not equal</a> (<code>!=</code>)</td>
   <td>如果两边操作数不相等时返回true</td>
  </tr>
  <tr>
   <td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Identity">全等 Strict equal</a> (<code>===</code>)</td>
   <td>两边操作数相等且类型相同时返回true。</td>
  </tr>
  <tr>
   <td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Nonidentity">不全等 Strict not equal</a> (<code>!==</code>)</td>
   <td>两边操作数不相等或类型不同时返回true。</td>

  </tr>
  <tr>
   <td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Greater_than_operator">大于 Greater than</a> (<code>&gt;</code>)</td>
   <td>左边的操作数大于右边的操作数返回true</td>

  </tr>
  <tr>
   <td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Greater_than_or_equal_operator">大于等于 Greater than or equal</a> (<code>&gt;=</code>)</td>
   <td>左边的操作数大于或等于右边的操作数返回true</td>

  </tr>
  <tr>
   <td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Less_than_operator">小于 Less than</a> (<code>&lt;</code>)</td>
   <td>左边的操作数小于右边的操作数返回true</td>

  </tr>
  <tr>
   <td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Less_than_or_equal_operator">小于等于 Less than or equal</a> (<code>&lt;=</code>)</td>
   <td>左边的操作数小于或等于右边的操作数返回true</td>

  </tr>
 </tbody>
</table>

下面是一些示例，可以看到它们和预期的结果是符合的：

``` js
> 1 + 2 >= 3;
true
> 569 < 123;
false
> 123 === 123;
true
> 2 * 3 === 3 + 3;
true
> 2 * 3 !== 3 + 3;
false
> 
```

字符串也可以使用比较运算，它们之间的比较使用的是**字典序**，由于日常应用的时候基本只需要判断字符串之间是否相等，所以这里不详细提及西点需大小的比较。

``` js
> "aaa" === 'aaa'; // 相等
true
> "aaa" !== "bbb"; // 不相等
true
> 'aaa' > 'bbb'; // 字典序
false
> 'aaa' <= 'bbb';
true
> 
```

你可能会注意到，上面我给出的示例只用了全等号(`===`)和不全等号(`!==`)，而没有使用普通的等于和不等于。事实上我们提倡尽可能使用三个等号组成的全等号，因为它可以避免 JS 过于宽松的自动类型转换带来的一些容易造成错误的问题。看看下面的代码：

``` js
> "0" == 0; // 自动类型转换
true
> "0" === 0; // 禁止了自动类型转换
false
> 123 != "123";
false
> 123 !== "123";
true
```

这里等于号和不等号遇到了一些问题：它把一个字符串和一个数字进行了转换，然后认为它们是相等的。这可能会导致你的程序出现一些难以排查的错误，所以尽可能避免它们。

## 逻辑运算

在进行比较运算的时候，我们可能会需要将多个条件连起来，我们假设有这三个变量需要判断：

- `num1` 大于 0 ，小于 100 。
- `num2` 可以被 2 整除或者可以被 3 整除。
- `num3` 既不被 5 整除，又不被 4 整除。

这就需要使用逻辑运算，将多个表达式组合起来，然后得到想要的结果。逻辑运算符有三种：

| 运算符 | 描述 | 示例 |
| ----- | ---  | ----|
| 与 ( `&&` ) | 当两边表达式值都为 true 时为 true，否则为 false | `true && true === true`<br>`true && false === false` |
| 或 ( `\|\|` ) | 当两边表达式值有一个为 true 时为 true，否则为 false | `true \|\| false === true`<br>`false \|\| flase === false` |
| 非 ( `!` )  | 当后面的值是 true 是为 false，反之为 true | `!true === false`<br>`!false === true` |

因此上面我们提到的例子可以这么写：

``` js
num1 > 0 && num1 < 100;
num2 % 2 === 0 || num2 % 3 === 0;
!(num3 % 5 === 0 || num3 % 4 === 0);
```

前面两个应该比较好理解，第三个为什么要带个括号呢？答案是运算符优先级问题。括号的作用是让括号里面的东西先算，这个学过数学都知道，放在这里也是一样的。如果我们去掉这个括号，就相当于下面这样：

``` js
!num3 % 5 === 0 || num3 % 4 === 0);
(!num3 % 5 === 0) || num3 % 4 === 0;
```

可以看到是左边的那个非运算符先算，再到后边的或运算符，就出错了。运算符优先级是这样：先算 `!`，再算 `&&` ，最后算 `||`，同级别从左到右。如果写程序的时候个别优先级不了解，那就多打几个括号，最多丑点。

## if 语句

前面讲了这么多逻辑
